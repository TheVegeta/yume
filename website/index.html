<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
      Yume - A lightning-fast, lightweight web framework built on uWebSockets.js
    </title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.2/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css"
    />
  </head>

  <body>
    <div class="container my-5">
      <div class="row bg-body-tertiary rounded-5">
        <div class="col-md-6">
          <div class="p-5 text-start mt-4 pb-0">
            <h1 class="text-body-emphasis">Yume (夢)</h1>
            <p class="lead">
              Yume is a lightweight web framework designed to build efficient
              API servers. It achieves this by leveraging the power of
              <a
                href="https://github.com/uNetworking/uWebSockets.js"
                target="_blank"
                >uWebSockets.js</a
              >, a high-performance WebSocket library for Node.js.
            </p>
            <a href="#install" class="btn btn-dark rounded-5">
              Get Started &ThickSpace;<i class="fa-solid fa-arrow-right"></i>
            </a>
            <div class="mt-4">
              <a
                href="https://github.com/TheVegeta/Yume"
                target="_blank"
                class="btn btn-dark"
              >
                <i class="fa-brands fa-github"></i>
              </a>

              <a
                href="https://www.npmjs.com/package/yume-server"
                target="_blank"
                class="btn btn-dark"
              >
                <i class="fa-brands fa-npm"></i>
              </a>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <pre
            class="theme-atom-one-dark shadow-3xl text-sm relative overflow-hidden max-w-full tab-size h-full"
          > 
          <code class="rounded-5 language-javascript">
  const yume = new Yume();
  const PORT = process.env.PORT || 8080;

  yume.get("/", (req, res) => {
    res.json({ hello: "Yume 夢" });
  });

  yume.listen(PORT, () => {
    console.log(`>started @${PORT}`);
  });
          </code>
        </pre>
        </div>
      </div>
    </div>
    <div class="container my-5" >
      <div class="bg-body-tertiary rounded-5 p-5">
        <h4>Documentation</h4>
        <ul>
          <li>
            <a href="#hello_yume_夢"> Hello Yume (夢) </a>
          </li>
          <li>
            <a href="#applying_middleware"> Applying middleware </a>
          </li>
          <li>
            <a href="#dynamic_routes"> Dynamic Routes </a>
          </li>
          <li>
            <a href="#query_parameter"> Query Parameter </a>
          </li>
          <li>
            <a href="#multipart_upload"> Multipart upload </a>
          </li>
          <li>
            <a href="#cors"> cors </a>
          </li>
          <li>
            <a href="#handling_404_route"> Handling 404 route </a>
          </li>
          <li>
            <a href="#handling_globle_error"> Handling globle error </a>
          </li>
          <li>
            <a href="#graphql"> GraphQL </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="container my-5" id="install">
      <ul class="bg-body-tertiary rounded-5 p-5">
        <li id="install">
          <h5>Install with NPM</h5>
           
            <pre
            class="theme-atom-one-dark shadow-3xl text-sm relative overflow-hidden max-w-full tab-size h-full"
          ><code class="rounded-5 language-javascript">npm i yume-server</code></pre> 
        
        </li>
        <li id="hello_yume_夢">
          <h5>Hello Yume (夢)</h5>
          <p>
            <pre
            class="theme-atom-one-dark shadow-3xl text-sm relative overflow-hidden max-w-full tab-size h-full"
          ><code class="rounded-5 language-javascript">
const yume = new Yume();
const PORT = process.env.PORT || 8080;

yume.get("/", (req, res) => {
  res.json({ hello: "Yume 夢" });
});

yume.listen(8080, () => {
  console.log(`>started @${PORT}`);
});
          </code></pre> 
         </p>
        </li>
        <li id="applying_middleware">
          <h5>Applying middleware</h5>
          <p>
            <pre
            class="theme-atom-one-dark shadow-3xl text-sm relative overflow-hidden max-w-full tab-size h-full"
          ><code class="rounded-5 language-javascript">
yume.use((req, res, next) => {
  console.log("Hello from middleware");
  next();
});
          </code></pre> 
         </p>
        </li>
        <li id="dynamic_routes">
          <h5>Dynamic Routes</h5>
          <p>
            <pre
            class="theme-atom-one-dark shadow-3xl text-sm relative overflow-hidden max-w-full tab-size h-full"
          ><code class="rounded-5 language-javascript">
yume.get("/post/:id", async (req, res) => {
  const { id } = req.getParams();
  return res.json({ id });
});
          </code></pre> 
         </p>
        </li>
        <li id="query_parameter">
          <h5>Query Parameter</h5>
          <p>
            <pre
            class="theme-atom-one-dark shadow-3xl text-sm relative overflow-hidden max-w-full tab-size h-full"
          ><code class="rounded-5 language-javascript">
// ?page=2&limit=3
yume.get("/post", async (req, res) => {
  const { page, limit } = req.query();
  return res.json({ page, limit });
});
          </code></pre> 
         </p>
        </li>
        <li id="multipart_upload">
          <h5>Multipart upload </h5>
          <p>
            <pre
            class="theme-atom-one-dark shadow-3xl text-sm relative overflow-hidden max-w-full tab-size h-full"
          ><code class="rounded-5 language-javascript">
yume.post("/upload", async (req, res) => {
  const filesArray = await req.file();

  filesArray?.map((file: MultipartField) => {
    // do something magical
  });

  res.json({ status: true, msg: "file uploaded successfully", data: {} });
});
          </code></pre> 
         </p>
        </li>
        <li id="cors">
          <h5>cors </h5>
          <p>
            <pre
            class="theme-atom-one-dark shadow-3xl text-sm relative overflow-hidden max-w-full tab-size h-full"
          ><code class="rounded-5 language-javascript">
yume.use((req, res, next) => {
  const origin = "https://example.com";
  res.writeHeader("Access-Control-Allow-Origin", origin);
  res.writeHeader("Access-Control-Allow-Methods", "GET, POST");
  next();
});
          </code></pre> 
         </p>
        </li> 
        <li id="handling_404_route">
          <h5>Handling 404 route </h5>
          <p>
            <pre
            class="theme-atom-one-dark shadow-3xl text-sm relative overflow-hidden max-w-full tab-size h-full"
          ><code class="rounded-5 language-javascript">
yume.notFound((req, res) => {
  res.status(404).end("Not found");
});
          </code></pre> 
         </p>
        </li> 
        <li id="handling_globle_error">
          <h5>Handling globle error</h5>
          <p>
            <pre
            class="theme-atom-one-dark shadow-3xl text-sm relative overflow-hidden max-w-full tab-size h-full"
          ><code class="rounded-5 language-javascript">
yume.error((err, req, res) => {
  console.error(err);
  res.status(500).end("Internal server error");
});
          </code></pre> 
         </p>
        </li> 
        <li id="graphql">
          <h5>GraphQL</h5>
          <p>
            <pre
            class="theme-atom-one-dark shadow-3xl text-sm relative overflow-hidden max-w-full tab-size h-full"
          ><code class="rounded-5 language-javascript">
const yume = new Yume();
const PORT = process.env.PORT || 8080;

const yoga = createYoga<IGqlContext>({
  schema,
});

yume.all("/graphql", async (req, res) => {
  const url = req.getUrl();
  const method = req.getMethod();
  const body = await req.body();

  const response = await yoga.fetch(
    url,
    {
      method: method,
      headers: req.headers,
      body: JSON.stringify(body),
    },
    { req, res }
  );

  return res.status(response.status).end(await response.text());
});

yume.listen(PORT, () => {
  console.log(`>started ${PORT}`);
});
          </code></pre> 
         </p>
        </li> 
      </ul>
    </div>
  </body>

  <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
  <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/languages/javascript.min.js"></script>
  <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
  <script>
    hljs.highlightAll();
    hljs.addPlugin(new CopyButtonPlugin());
  </script>
</html>
